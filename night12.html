<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>DJ Radar · Commercial</title>

<style>
html,body{
  margin:0;
  background:#000;
  overflow:hidden;
  font-family:"Microsoft JhengHei",sans-serif;
  color:#0ff;
}
#app{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* 雷達 */
.radar{
  position:relative;
  width:80vmin;
  height:80vmin;
  max-width:900px;
  max-height:900px;
  border-radius:50%;
  background:radial-gradient(circle,
    rgba(0,255,255,.35),
    rgba(0,255,255,.08) 60%,
    #000 72%);
  box-shadow:0 0 60px #0ff;
}

/* 掃描線 */
.scan{
  position:absolute;
  inset:0;
  border-radius:50%;
  background:conic-gradient(
    from 0deg,
    rgba(0,255,255,.9),
    rgba(0,255,255,0) 60%
  );
  animation:spin 6s linear infinite;
}

/* 唱片 */
.disc{
  position:absolute;
  inset:22%;
  border-radius:50%;
  overflow:hidden;
  background:#000;
  z-index:3;
}

/* YouTube */
#player iframe{
  width:100%;
  height:100%;
  border:none;
}

/* 手機解鎖層 */
#clickLayer{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.75);
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:28px;
  cursor:pointer;
  z-index:10;
}

/* HUD */
.hud{
  position:fixed;
  top:20px;
  left:20px;
}
.logo{font-size:26px;font-weight:bold;}
.status{font-size:14px;opacity:.8;}
.trackname{margin-top:6px;font-size:18px;}

/* 名曲牆 */
.wall{
  position:fixed;
  bottom:20px;
  display:flex;
  gap:12px;
}
.track{
  padding:8px 14px;
  border:1px solid #0ff;
  border-radius:16px;
  cursor:pointer;
}
.track:hover{background:#0ff;color:#000;}

/* 時間軸 */
#timeline{
  position:fixed;
  bottom:90px;
  width:80%;
  height:14px;
  border:1px solid #0ff;
  border-radius:8px;
  overflow:hidden;
}
#progress{
  position:absolute;
  left:0;
  top:0;
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#0ff,#00ffaa);
}
.ticks{
  position:absolute;
  inset:0;
  background:repeating-linear-gradient(
    to right,
    rgba(0,255,255,.4),
    rgba(0,255,255,.4) 1px,
    transparent 1px,
    transparent 40px
  );
}

@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div id="app">

  <div class="radar">
    <div class="scan"></div>
    <div class="disc"><div id="player"></div></div>
    <div id="clickLayer">▶ TAP TO START</div>
  </div>

</div>

<div id="timeline">
  <div class="ticks"></div>
  <div id="progress"></div>
</div>

<div class="hud">
  <div class="logo">PP • DJ SYSTEM</div>
  <div class="status" id="mode">LIVE MODE</div>
  <div class="trackname" id="trackName">Night Drive</div>
</div>

<div class="wall">
  <div class="track" data-id="OjRlVpAOQ">Night Drive</div>
  <div class="track" data-id="oZzbWvByPvg">Cyber City</div>
  <div class="track" data-id="i9IlDKZ6-0U">DJ Future</div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player, started=false;
let demoTimer, demoIndex=0;
let lastDropTime=0;

const demoList=["OjRlVpAOQ","oZzbWvByPvg","i9IlDKZ6-0U"];

function onYouTubeIframeAPIReady(){
  player=new YT.Player("player",{
    videoId:demoList[0],
    playerVars:{playsinline:1,controls:0,rel:0}
  });

  document.getElementById("clickLayer").onclick=()=>{
    player.playVideo();     // ✅ 手機必有聲
    started=true;
    document.getElementById("clickLayer").style.display="none";
    startIdleDemo();
  };
}

/* 名曲牆 */
document.querySelectorAll(".track").forEach(t=>{
  t.onclick=()=>{
    if(!started) return;
    stopDemo();
    document.getElementById("trackName").textContent=t.textContent;
    player.loadVideoById(t.dataset.id);
  };
});

/* Demo */
function startIdleDemo(){
  clearTimeout(demoTimer);
  demoTimer=setTimeout(()=>{
    document.getElementById("mode").textContent="DEMO MODE";
    runDemo();
  },30000);
}
function runDemo(){
  player.loadVideoById(demoList[demoIndex]);
  demoIndex=(demoIndex+1)%demoList.length;
  demoTimer=setTimeout(runDemo,25000);
}
function stopDemo(){
  document.getElementById("mode").textContent="LIVE MODE";
  clearTimeout(demoTimer);
}

/* 時間軸 */
setInterval(()=>{
  if(!player||!started) return;
  const d=player.getDuration(), c=player.getCurrentTime();
  if(d) document.getElementById("progress").style.width=(c/d*100)+"%";
},200);

/* 倒數 */
setInterval(()=>{
  if(!player||!started) return;
  const r=player.getDuration()-player.getCurrentTime();
  document.getElementById("timeline").style.boxShadow=
    r<3?"0 0 25px #0ff":"";
},200);

/* Beat Drop（展示） */
setInterval(()=>{
  if(!player||!started) return;
  const t=Math.floor(player.getCurrentTime());
  if(t%8===0 && Math.abs(t-lastDropTime)>1){
    document.querySelector(".radar").style.boxShadow="0 0 120px white";
    setTimeout(()=>document.querySelector(".radar").style.boxShadow="0 0 60px #0ff",150);
    lastDropTime=t;
  }
},120);
</script>
</body>
</html>
