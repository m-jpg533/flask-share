<!-- <!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å…ƒå®µç…™ç«ç¥ç¦</title>

<!-- LINE åˆ†äº«å°é¢ -->
<meta property="og:title" content="å…ƒå®µç…™ç«ç¥ç¦">
<meta property="og:description" content="é»é–‹çœ‹å°ˆå±¬ç…™ç«ç¥ç¦ ğŸ†">
<meta property="og:image" content="https://m-jpg533.github.io/flask-media-share/fireworks-cover.jpg">
<meta property="og:type" content="website">

<style>
body{
  margin:0;
  background:black;
  overflow:hidden;
  touch-action:none;
}

canvas{
  position:absolute;
  z-index:1;
}

#text{
  position:fixed;
  width:100%;
  top:35%;
  text-align:center;
  font-size:48px;
  font-weight:bold;
  z-index:10;
  animation: glow 1s infinite alternate;
}

@keyframes glow{
  from{ text-shadow:0 0 10px gold; }
  to{ text-shadow:0 0 30px yellow; }
}

/* åå­—è¼¸å…¥æ¡†ï¼ˆåœ¨éŸ³æ¨‚ä¸Šæ–¹ï¼‰ */
#nameBox{
  position:fixed;
  bottom:80px;
  right:20px;
  z-index:15;
}

#nameBox input{
  font-size:18px;
  padding:6px;
  border-radius:6px;
  border:none;
}

#nameBox button{
  font-size:16px;
  padding:6px 10px;
  border:none;
  border-radius:6px;
}

/* æŒ‰éˆ•å€ */
#musicBtn{
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:20;
  padding:8px 12px;
  border:none;
  border-radius:6px;
}

#shareBtn{
  position:fixed;
  bottom:140px;
  right:20px;
  z-index:20;
  padding:8px 12px;
  border:none;
  border-radius:6px;
}

#copyBtn{
  position:fixed;
  bottom:180px;
  right:20px;
  z-index:20;
  padding:8px 12px;
  border:none;
  border-radius:6px;
}

#editBtn{
  position:fixed;
  bottom:110px;
  right:20px;
  z-index:20;
  padding:8px 12px;
  border:none;
  border-radius:6px;
}
</style>
</head>

<body>

<div id="text">ğŸ† å…ƒå®µå¿«æ¨‚ ğŸ†</div>

<div id="nameBox">
  <input id="nameInput" placeholder="è¼¸å…¥åå­—">
  <button id="nameBtn">ç¢ºèª</button>
</div>

<button id="copyBtn">ğŸ”— è¤‡è£½é€£çµ</button>
<button id="shareBtn">ğŸ“¤ åˆ†äº«ç¥ç¦</button>
<button id="editBtn" style="display:none;">é‡æ–°è¼¸å…¥</button>
<button id="musicBtn">ğŸ”Š éŸ³æ¨‚</button>

<canvas id="fire"></canvas>

<audio id="bgm" loop>
  <source src="https://m-jpg533.github.io/flask-media-share/82.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("fire");
const ctx = canvas.getContext("2d");
const bgm = document.getElementById("bgm");
const text = document.getElementById("text");
const nameBox = document.getElementById("nameBox");
const nameInput = document.getElementById("nameInput");
const editBtn = document.getElementById("editBtn");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let particles=[];

/* åå­—è½‰é¡è‰² */
function getColorFromName(name){
  let hash=0;
  for(let i=0;i<name.length;i++){
    hash=name.charCodeAt(i)+((hash<<5)-hash);
  }
  return `hsl(${Math.abs(hash)%360},100%,50%)`;
}

/* å½©è‰²ç…™ç« */
function createFirework(){
  let x=Math.random()*canvas.width;
  let y=Math.random()*canvas.height/2;
  let count=Math.max(50,nameInput.value.length*10);

  for(let i=0;i<count;i++){
    particles.push({
      x,y,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      life:100,
      color:`hsl(${Math.random()*360},100%,50%)`
    });
  }
}

function draw(){
  ctx.fillStyle="rgba(0,0,0,0.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  particles.forEach((p,i)=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,2,0,Math.PI*2);
    ctx.fillStyle=p.color;
    ctx.fill();
    p.x+=p.vx;
    p.y+=p.vy;
    p.life--;
    if(p.life<=0) particles.splice(i,1);
  });

  requestAnimationFrame(draw);
}

setInterval(createFirework,800);
draw();

/* è¨­å®šåå­— */
function setName(name){
  text.textContent=`ğŸ† ${name} å…ƒå®µå¿«æ¨‚ ğŸ†`;
  text.style.color=getColorFromName(name);
  nameBox.style.display="none";
  editBtn.style.display="block";
}

/* ç¢ºèªåå­— + å¯«å…¥ç¶²å€ */
document.getElementById("nameBtn").onclick=()=>{
  const name=nameInput.value.trim();
  if(!name) return;
  const newUrl=`${location.pathname}?name=${encodeURIComponent(name)}`;
  history.replaceState(null,"",newUrl);
  setName(name);
};

/* é‡æ–°è¼¸å…¥ */
editBtn.onclick=()=>{
  nameBox.style.display="block";
  editBtn.style.display="none";
};

/* è‡ªå‹•è®€ç¶²å€åå­— */
const params=new URLSearchParams(location.search);
const urlName=params.get("name");
if(urlName){
  nameInput.value=urlName;
  setName(urlName);
}

/* åˆ†äº« */
document.getElementById("shareBtn").onclick=()=>{
  const url=location.href;
  if(navigator.share){
    navigator.share({title:"ç…™ç«ç¥ç¦",url:url});
  }else{
    window.open("https://social-plugins.line.me/lineit/share?url="+encodeURIComponent(url));
  }
};

/* è¤‡è£½ */
document.getElementById("copyBtn").onclick=()=>{
  navigator.clipboard.writeText(location.href);
  alert("é€£çµå·²è¤‡è£½");
};

/* éŸ³æ¨‚æ§åˆ¶ */
document.getElementById("musicBtn").onclick=()=>{
  if(bgm.paused) bgm.play();
  else bgm.pause();
};

canvas.addEventListener("click",()=>bgm.play().catch(()=>{}));
canvas.addEventListener("touchstart",()=>bgm.play().catch(()=>{}));

/* é›¢é–‹é é¢åœæ­¢éŸ³æ¨‚ */
document.addEventListener("visibilitychange",()=>{
  if(document.hidden) bgm.pause();
});
window.addEventListener("pagehide",()=>bgm.pause());
window.addEventListener("beforeunload",()=>bgm.pause());
</script>

</body>
</html> -->

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>å…ƒå®µç…™ç«ç¥ç¦</title>

<!-- LINE åˆ†äº«å°é¢ -->
<meta property="og:title" content="å…ƒå®µç…™ç«ç¥ç¦">
<meta property="og:description" content="é»é–‹çœ‹å°ˆå±¬ç…™ç«ç¥ç¦ ğŸ†">
<meta property="og:image" content="https://m-jpg533.github.io/flask-media-share/fireworks-cover.jpg">
<meta property="og:type" content="website">

<style>
body{
  margin:0;
  background:black;
  overflow:hidden;
  touch-action:none;
  font-family: Arial, sans-serif;
}

canvas{
  position:absolute;
  z-index:1;
}

/* ç¥ç¦æ–‡å­— */
#text{
  position:fixed;
  width:100%;
  top:28%;
  text-align:center;
  font-size: clamp(24px, 6vw, 48px);
  font-weight:bold;
  z-index:10;
  animation: glow 1s infinite alternate;
}

@keyframes glow{
  from{ text-shadow:0 0 10px gold; }
  to{ text-shadow:0 0 30px yellow; }
}

/* ===== åº•éƒ¨æ§åˆ¶é¢æ¿ ===== */
#uiPanel{
  position:fixed;
  left:0;
  bottom: env(safe-area-inset-bottom);
  width:100%;
  padding:10px;
  box-sizing:border-box;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:8px;
  z-index:20;
  background:rgba(0,0,0,0.4);
}

/* è¼¸å…¥æ¡† */
#nameInput{
  height:40px;
  font-size:16px;
  padding:0 10px;
  border-radius:8px;
  border:none;
}

/* æŒ‰éˆ• */
.uiBtn{
  height:40px;
  font-size:14px;
  padding:0 12px;
  border:none;
  border-radius:8px;
}
</style>
</head>

<body>

<div id="text">ğŸ† å…ƒå®µå¿«æ¨‚ ğŸ†</div>

<div id="uiPanel">
  <input id="nameInput" placeholder="è¼¸å…¥åå­—">
  <button id="nameBtn" class="uiBtn">ç¢ºèª</button>
  <button id="editBtn" class="uiBtn" style="display:none;">é‡æ–°è¼¸å…¥</button>
  <button id="copyBtn" class="uiBtn">ğŸ”— è¤‡è£½</button>
  <button id="shareBtn" class="uiBtn">ğŸ“¤ åˆ†äº«</button>
  <button id="musicBtn" class="uiBtn">ğŸ”Š éŸ³æ¨‚</button>
</div>

<canvas id="fire"></canvas>

<audio id="bgm" loop>
  <source src="https://m-jpg533.github.io/flask-media-share/82.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("fire");
const ctx = canvas.getContext("2d");
const bgm = document.getElementById("bgm");
const text = document.getElementById("text");
const nameInput = document.getElementById("nameInput");
const editBtn = document.getElementById("editBtn");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let particles=[];

/* åå­—è½‰é¡è‰² */
function getColorFromName(name){
  let hash=0;
  for(let i=0;i<name.length;i++){
    hash=name.charCodeAt(i)+((hash<<5)-hash);
  }
  return `hsl(${Math.abs(hash)%360},100%,50%)`;
}

/* å½©è‰²ç…™ç« */
function createFirework(){
  let x=Math.random()*canvas.width;
  let y=Math.random()*canvas.height/2;
  let count=Math.max(50,nameInput.value.length*10);

  for(let i=0;i<count;i++){
    particles.push({
      x,y,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      life:100,
      color:`hsl(${Math.random()*360},100%,50%)`
    });
  }
}

function draw(){
  ctx.fillStyle="rgba(0,0,0,0.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  particles.forEach((p,i)=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,2,0,Math.PI*2);
    ctx.fillStyle=p.color;
    ctx.fill();
    p.x+=p.vx;
    p.y+=p.vy;
    p.life--;
    if(p.life<=0) particles.splice(i,1);
  });

  requestAnimationFrame(draw);
}

setInterval(createFirework,800);
draw();

/* è¨­å®šåå­— */
function setName(name){
  text.textContent=`ğŸ† ${name} å…ƒå®µå¿«æ¨‚ ğŸ†`;
  text.style.color=getColorFromName(name);
  nameInput.style.display="none";
  document.getElementById("nameBtn").style.display="none";
  editBtn.style.display="inline-block";
}

/* ç¢ºèªåå­— + å¯«å…¥ç¶²å€ */
document.getElementById("nameBtn").onclick=()=>{
  const name=nameInput.value.trim();
  if(!name) return;
  const newUrl=`${location.pathname}?name=${encodeURIComponent(name)}`;
  history.replaceState(null,"",newUrl);
  setName(name);
};

/* é‡æ–°è¼¸å…¥ */
editBtn.onclick=()=>{
  nameInput.style.display="inline-block";
  document.getElementById("nameBtn").style.display="inline-block";
  editBtn.style.display="none";
};

/* è‡ªå‹•è®€ç¶²å€åå­— */
const params=new URLSearchParams(location.search);
const urlName=params.get("name");
if(urlName){
  nameInput.value=urlName;
  setName(urlName);
}

/* åˆ†äº« */
document.getElementById("shareBtn").onclick=()=>{
  const url=location.href;
  if(navigator.share){
    navigator.share({title:"ç…™ç«ç¥ç¦",url:url});
  }else{
    window.open("https://social-plugins.line.me/lineit/share?url="+encodeURIComponent(url));
  }
};

/* è¤‡è£½ */
document.getElementById("copyBtn").onclick=()=>{
  navigator.clipboard.writeText(location.href);
  alert("é€£çµå·²è¤‡è£½");
};

/* éŸ³æ¨‚æ§åˆ¶ */
document.getElementById("musicBtn").onclick=()=>{
  if(bgm.paused) bgm.play();
  else bgm.pause();
};

canvas.addEventListener("click",()=>bgm.play().catch(()=>{}));
canvas.addEventListener("touchstart",()=>bgm.play().catch(()=>{}));

document.addEventListener("visibilitychange",()=>{
  if(document.hidden) bgm.pause();
});
window.addEventListener("pagehide",()=>bgm.pause());
</script>

</body>
</html>