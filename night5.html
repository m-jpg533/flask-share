<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DJ Radar · Commercial</title>

<style>
body{
  margin:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:"Microsoft JhengHei",sans-serif;
  color:#00ffff;
  overflow:hidden;
}

.title{
  position:absolute;
  top:20px;
  font-size:36px;
  text-shadow:0 0 15px #0ff;
}

/* ===== 雷達 ===== */
.radar{
  position:relative;
  width:90vmin;
  height:90vmin;
  max-width:520px;
  max-height:520px;
  border-radius:50%;
  background:radial-gradient(circle,
    rgba(0,255,255,.35),
    rgba(0,255,255,.05) 60%,
    #000 72%);
  box-shadow:0 0 50px rgba(0,255,255,.9);
}

/* 外圈旋轉 */
.radar::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  background:conic-gradient(#0ff,#033,#0ff);
  animation:spin 16s linear infinite;
  opacity:.6;
}

/* 掃描線 */
.scan{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.scan::before{
  content:"";
  position:absolute;
  width:50%;
  height:2px;
  top:50%;
  left:50%;
  transform-origin:left center;
  background:linear-gradient(to right,transparent,#0ff);
  box-shadow:0 0 12px #0ff;
}

/* 唱片 */
.disc{
  position:absolute;
  inset:22%;
  border-radius:50%;
  overflow:hidden;
  z-index:3;
  background:#000;
}

/* YouTube */
#player iframe{
  width:100%;
  height:100%;
  border:none;
  pointer-events:none; /* 事件交給唱片 */
}

/* Click Layer */
.click{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:32px;
  background:rgba(0,0,0,.7);
  cursor:pointer;
  z-index:5;
}

/* 光點 */
.dot{
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  background:#0ff;
  box-shadow:0 0 12px #0ff;
  animation:fade 1s forwards;
}

/* 名曲牆 */
.wall{
  position:absolute;
  bottom:20px;
  display:flex;
  gap:12px;
}
.track{
  padding:8px 14px;
  border:1px solid #0ff;
  border-radius:16px;
  cursor:pointer;
  text-shadow:0 0 8px #0ff;
}
.track:hover{
  background:#0ff;
  color:#000;
}

@keyframes spin{to{transform:rotate(360deg)}}
@keyframes fade{to{opacity:0; transform:scale(2)}}
</style>
</head>

<body>

<div class="title">DJ Radar · Commercial</div>

<div class="radar" id="radar">
  <div class="scan" id="scan"></div>

  <div class="disc" id="disc">
    <div id="player"></div>
  </div>

  <div class="click" id="click">▶ CLICK TO START</div>
</div>

<div class="wall">
  <div class="track" data-id="IOcLRLu6HC0">Night Drive</div>
  <div class="track" data-id="4F9r3G_2Qb0">Cyber City</div>
  <div class="track" data-id="ui3IcnvbHFA">DJ Future</div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
let player;
let started=false;
const scan=document.getElementById("scan");
const disc=document.getElementById("disc");
const radar=document.getElementById("radar");
const click=document.getElementById("click");

/* ===== YouTube ===== */
function onYouTubeIframeAPIReady(){
  player=new YT.Player("player",{
    videoId:"JHBTUSNPN7U",
    playerVars:{
      playsinline:1,
      controls:0,
      rel:0
    }
  });
}

/* ===== 點擊必有聲 ===== */
click.onclick=()=>{
  player.playVideo();
  click.style.display="none";
  started=true;
};

/* ===== Scratch ===== */
let dragging=false;
let startX=0;
let startTime=0;

disc.addEventListener("pointerdown",e=>{
  if(!started) return;
  dragging=true;
  startX=e.clientX;
  startTime=player.getCurrentTime();
  player.pauseVideo();
});

window.addEventListener("pointermove",e=>{
  if(!dragging) return;

  const dx=e.clientX-startX;
  const seek=Math.max(0,startTime+dx*0.03);
  player.seekTo(seek,true);

  scan.style.transform=`rotate(${dx*0.6}deg)`;
  spawnDot(dx*0.6);
});

window.addEventListener("pointerup",()=>{
  if(!dragging) return;
  dragging=false;
  scan.style.transform="";
  player.playVideo();
});

/* ===== 雷達光點 ===== */
function spawnDot(angle){
  const dot=document.createElement("div");
  dot.className="dot";
  const r=50+Math.random()*40;
  const rad=angle*Math.PI/180;
  dot.style.left=50+r*Math.cos(rad)+"%";
  dot.style.top =50+r*Math.sin(rad)+"%";
  radar.appendChild(dot);
  setTimeout(()=>dot.remove(),1000);
}

/* ===== 名曲牆切歌 ===== */
document.querySelectorAll(".track").forEach(t=>{
  t.onclick=()=>{
    if(!started) return;
    player.loadVideoById(t.dataset.id);
  };
});
</script>

</body>
</html>
