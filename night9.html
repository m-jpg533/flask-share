<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DJ Radar · Pro Timeline</title>

<style>
body{
  margin:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:"Microsoft JhengHei",sans-serif;
  color:#0ff;
  overflow:hidden;
}

/* ===== 主雷達 ===== */
.radar{
  position:relative;
  width:80vmin;
  height:80vmin;
  max-width:820px;
  max-height:820px;
  border-radius:50%;
  background:radial-gradient(circle,
    rgba(0,255,255,.35),
    rgba(0,255,255,.05) 60%,
    #000 72%);
  box-shadow:0 0 50px rgba(0,255,255,.9);
}

/* 掃描 */
.radar::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  background:conic-gradient(#0ff,#033,#0ff);
  animation:spin 18s linear infinite;
  opacity:.6;
}

/* 唱片 */
.disc{
  position:absolute;
  inset:22%;
  border-radius:50%;
  overflow:hidden;
  z-index:3;
}
#player iframe{
  width:100%;
  height:100%;
  border:none;
}

/* 點擊解鎖 */
.click{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:26px;
  background:rgba(0,0,0,.75);
  cursor:pointer;
  z-index:5;
}

/* ===== 時間軸 ===== */
.timeline{
  position:absolute;
  bottom:-70px;
  width:80%;
  height:10px;
  border:1px solid #0ff;
  border-radius:10px;
  overflow:hidden;
}

.progress{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#0ff,#fff);
  box-shadow:0 0 12px #0ff;
}

.time-text{
  position:absolute;
  bottom:-26px;
  width:100%;
  text-align:center;
  font-size:14px;
}

/* Beat Drop */
.drop{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:36px;
  opacity:0;
  text-shadow:0 0 20px #0ff;
}

/* 名曲牆 */
.wall{
  position:absolute;
  bottom:18px;
  display:flex;
  gap:12px;
}
.track{
  padding:6px 14px;
  border:1px solid #0ff;
  border-radius:14px;
  cursor:pointer;
}

@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>

<div class="radar">
  <div class="disc">
    <div id="player"></div>
  </div>

  <div class="click" id="click">▶ TAP TO START</div>

  <div class="drop" id="drop">BEAT DROP</div>

  <div class="timeline">
    <div class="progress" id="progress"></div>
  </div>
  <div class="time-text" id="timeText">00:00 / 00:00</div>
</div>

<div class="wall">
  <div class="track" data-id="AaBw37-nWaY">Night Drive</div>
  <div class="track" data-id="T71tWvu1UGc">Cyber City</div>
  <div class="track" data-id="ChhCpSVrjvU">DJ Future</div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player, started=false, currentTrack="IOcLRLu6HC0";

const tracks={
  "IOcLRLu6HC0":{name:"Night Drive",drop:42},
  "4F9r3G_2Qb0":{name:"Cyber City",drop:36},
  "ui3IcnvbHFA":{name:"DJ Future",drop:48}
};

const progress=document.getElementById("progress");
const timeText=document.getElementById("timeText");
const dropText=document.getElementById("drop");

function onYouTubeIframeAPIReady(){
  player=new YT.Player("player",{
    videoId:currentTrack,
    playerVars:{playsinline:1,controls:0}
  });
}

document.getElementById("click").onclick=()=>{
  player.mute();
  player.playVideo();
  setTimeout(()=>player.unMute(),300);
  started=true;
  document.getElementById("click").style.display="none";
};

/* ===== 時間軸更新 ===== */
setInterval(()=>{
  if(!started) return;
  const cur=player.getCurrentTime();
  const dur=player.getDuration();
  if(!dur) return;

  progress.style.width=(cur/dur*100)+"%";
  timeText.textContent=
    format(cur)+" / "+format(dur);

  const drop=tracks[currentTrack].drop;
  if(Math.abs(cur-drop)<0.4){
    dropText.style.opacity=1;
    setTimeout(()=>dropText.style.opacity=0,500);
  }
},200);

function format(s){
  const m=Math.floor(s/60);
  const ss=Math.floor(s%60);
  return `${String(m).padStart(2,"0")}:${String(ss).padStart(2,"0")}`;
}

/* ===== 切歌 ===== */
document.querySelectorAll(".track").forEach(t=>{
  t.onclick=()=>{
    if(!started) return;
    currentTrack=t.dataset.id;
    player.loadVideoById(currentTrack);
  };
});
</script>

</body>
</html>
